<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Resources</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      font-family: Poppins, sans-serif;
      background: #eef3ff;
      padding: 20px;
    }

    .logout-btn {
      position: absolute;
      top: 15px;
      right: 20px;
    }

    .page-title {
      font-weight: 700;
      font-size: 28px;
      text-align: center;
      margin-bottom: 25px;
      color: #2c3e50;
    }

    .book-card {
      padding: 12px 14px;
      margin: 6px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.08);
      min-width: 180px;
    }

    .category-title {
      margin-top: 20px;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 1.05rem;
      color: #333;
    }
  </style>
</head>

<body>

<!-- LOGOUT BUTTON -->
<a href="{{ url_for('logout') }}" class="btn btn-danger btn-sm logout-btn">Logout</a>

<div class="container">

  <!-- PAGE TITLE -->
  <div class="page-title">Dithi Resources</div>

  <!-- TOP TABS: Books + Phonics -->
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active"
              id="books-tab"
              data-bs-toggle="tab"
              data-bs-target="#books"
              type="button"
              role="tab">
        Books
      </button>
    </li>

    <li class="nav-item ms-auto" role="presentation">
      <button class="nav-link"
              id="phonics-tab"
              data-bs-toggle="tab"
              data-bs-target="#phonics"
              type="button"
              role="tab">
        Phonics Entry
      </button>
    </li>
  </ul>

  <!-- MAIN TAB CONTENT -->
  <div class="tab-content mt-4">

    <!-- BOOKS TAB -->
    <div class="tab-pane fade show active" id="books" role="tabpanel" aria-labelledby="books-tab">
      <!-- LEVEL TABS -->
      <ul class="nav nav-tabs mt-3" role="tablist">
        {% for lvl in level_tabs %}
          <li class="nav-item">
            <button class="nav-link {% if loop.first %}active{% endif %}"
                    data-bs-toggle="tab"
                    data-bs-target="#level-{{ lvl | replace(' ','_') | lower }}">
              {{ lvl }}
            </button>
          </li>
        {% endfor %}
      </ul>

      <!-- LEVEL CONTENT -->
      <div class="tab-content mt-4">
        {% set categories = ['Story','Words','Workout','Comprehension','Test'] %}
        {% for lvl in level_tabs %}
          <div class="tab-pane fade {% if loop.first %}show active{% endif %}"
               id="level-{{ lvl | replace(' ','_') | lower }}">
            {% for cat in categories %}
              {% set cat_books = [] %}
              {% for b in books_by_level[lvl] %}
                {% if (b.category or '')|lower == cat|lower %}
                  {% set _ = cat_books.append(b) %}
                {% endif %}
              {% endfor %}

              {% if cat_books|length > 0 %}
                <div class="category-title">{{ cat }}</div>
                <div class="d-flex flex-wrap">
                  {% for b in cat_books %}
                    <div class="book-card">
                      <strong>{{ b.original_name }}</strong><br>
                      <small>Level: {{ b.levels }}</small><br>
                      <a href="{{ url_for('view_book', book_id=b.id) }}"
                         class="btn btn-sm btn-primary mt-2">
                        View
                      </a>
                    </div>
                  {% endfor %}
                </div>
              {% endif %}
            {% endfor %}
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- PHONICS TAB -->
    <div class="tab-pane fade" id="phonics" role="tabpanel" aria-labelledby="phonics-tab">
      <div class="card p-4 mt-3">
        <h4>üóìÔ∏è Enter Daily Record</h4>

        <form method="POST" action="{{ url_for('teacher_phonics') }}" id="phonicsForm">
          <div class="mb-3">
            <label>Date</label>
            <input type="date" name="date" class="form-control" required>
          </div>

          <div class="mb-3">
            <label>Student Name</label>
            <input type="text" name="student_name" class="form-control" required>
          </div>

          <div class="mb-3">
            <label>Level</label>
            <select name="level" class="form-select" id="levelSelectPhonics" required>
              <option value="" disabled selected>Select your level</option>
              {% for lvl in level_tabs %}
                <option value="{{ lvl }}">{{ lvl }}</option>
              {% endfor %}
            </select>
          </div>

         <label class="mt-3">Book Name</label>
<select name="book_name" class="form-select" id="bookSelect" disabled required>
  <option value="">-- Select Book --</option>

            <!-- LEVEL 1 -->
            <option value="1" data-level="1">Snap</option>
            <option value="2" data-level="1">Tips</option>
            <option value="3" data-level="1">Ants</option>

            <!-- LEVEL 2 -->
            <option value="4" data-level="2">Hen and Cat‚Äôs Picnic</option>
            <option value="5" data-level="2">Pet Panic</option>
            <option value="6" data-level="2">Dad‚Äôs Red Tent</option>

            <!-- LEVEL 3 -->
            <option value="7" data-level="3">Golf Is Not Fun</option>
            <option value="8" data-level="3">Brett‚Äôs Dragon</option>
            <option value="9" data-level="3">Duck gets stuck</option>

            <!-- LEVEL 4 -->
            <option value="10" data-level="4">Just a Storm</option>
            <option value="11" data-level="4">Red Jack‚Äôs Fort</option>
            <option value="12" data-level="4">Jaiden‚Äôs Lies</option>

            <!-- LEVEL 5 -->
            <option value="13" data-level="5">A Hospital Visit</option>
            <option value="14" data-level="5">Seven Elves</option>
            <option value="15" data-level="5">A Pong at Oak Wood Zoo</option>

            <!-- LEVEL 6 -->
            <option value="16" data-level="6">An Omelette for Lunch</option>
            <option value="17" data-level="6">Fox Cub Stops Yelling</option>
            <option value="18" data-level="6">A Boxfish in a Rush</option>

            <!-- LEVEL 7 -->
            <option value="19" data-level="7">Spoilsport</option>
            <option value="20" data-level="7">In the Attic</option>
            <option value="21" data-level="7">Mervin‚Äôs Garden</option>

            <!-- RED -->
            <option value="22" data-level="Red">Mud</option>
            <option value="23" data-level="Red">Inky</option>
            <option value="24" data-level="Red">Zack</option>
            <option value="25" data-level="Red">Snake</option>
            <option value="26" data-level="Red">Monster Footsteps</option>
            <option value="27" data-level="Red">Moat Farm</option>
            <option value="28" data-level="Red">The Rocket</option>
            <option value="29" data-level="Red">Monsters</option>
            <option value="30" data-level="Red">The Pond</option>
            <option value="31" data-level="Red">Helping</option>
            <option value="32" data-level="Red">The Wind and the Sun</option>
            <option value="33" data-level="Red">Star and Fish</option>
            <option value="34" data-level="Red">A Dog Has Pups</option>
            <option value="35" data-level="Red">A Shoal of Fish</option>
            <option value="36" data-level="Red">Slugs and Snails</option>
            <option value="37" data-level="Red">Foxes</option>
            <option value="38" data-level="Red">Insects</option>
            <option value="39" data-level="Red">Book Week</option>

            <!-- YELLOW -->
            <option value="40" data-level="Yellow">Phonic</option>
            <option value="41" data-level="Yellow">Hetty</option>
            <option value="42" data-level="Yellow">Zack‚Äôs Present</option>
            <option value="43" data-level="Yellow">Picnic</option>
            <option value="44" data-level="Yellow">Spots</option>
            <option value="45" data-level="Yellow">Looking for Snake</option>
            <option value="46" data-level="Yellow">Monster Party</option>
            <option value="47" data-level="Yellow">Red Hen</option>
            <option value="48" data-level="Yellow">The Box</option>
            <option value="49" data-level="Yellow">Swimming</option>
            <option value="50" data-level="Yellow">Crabs</option>
            <option value="51" data-level="Yellow">Animal Chatter</option>
            <option value="52" data-level="Yellow">Rainforests</option>
            <option value="53" data-level="Yellow">Cheese Stars</option>
            <option value="54" data-level="Yellow">Oil</option>
            <option value="55" data-level="Yellow">Lizards</option>
            <option value="56" data-level="Yellow">Shells</option>
            <option value="57" data-level="Yellow">Butterflies and Moths</option>

            <!-- GREEN -->
            <option value="58" data-level="Green">The Tree That Blinked</option>
            <option value="59" data-level="Green">What‚Äôs in the Box?</option>
            <option value="60" data-level="Green">The Old Red Tractor</option>
            <option value="61" data-level="Green">The Model Boat</option>
            <option value="62" data-level="Green">Wait and See!</option>
            <option value="63" data-level="Green">The Bad-Tempered Goat</option>
            <option value="64" data-level="Green">The Three Billy Goats Gruff</option>
            <option value="65" data-level="Green">The Fox and the Stork</option>
            <option value="66" data-level="Green">The Outing</option>
            <option value="67" data-level="Green">The Little Merman</option>
            <option value="68" data-level="Green">The Cricket and the Ants</option>
            <option value="69" data-level="Green">Little Monsters</option>
            <option value="70" data-level="Green">Snakes</option>
            <option value="71" data-level="Green">Deserts</option>
            <option value="72" data-level="Green">Captain Scott</option>
            <option value="73" data-level="Green">Underground</option>
            <option value="74" data-level="Green">Mushrooms</option>
            <option value="75" data-level="Green">Teeth</option>

            <!-- BLUE -->
            <option value="76" data-level="Blue">The Bird House</option>
            <option value="77" data-level="Blue">Daisy and Buttercup</option>
            <option value="78" data-level="Blue">The New Kitten</option>
            <option value="79" data-level="Blue">An Inter-Hive Match</option>
            <option value="80" data-level="Blue">The Maize Maze</option>
            <option value="81" data-level="Blue">Beach Rescue</option>
            <option value="82" data-level="Blue">The Enormous Turnip</option>
            <option value="83" data-level="Blue">Rumpelstiltskin</option>
            <option value="84" data-level="Blue">Puppets</option>
            <option value="85" data-level="Blue">Many More Monsters</option>
            <option value="86" data-level="Blue">The Pumpkin Party</option>
            <option value="87" data-level="Blue">Soccer</option>
            <option value="88" data-level="Blue">Mountains</option>
            <option value="89" data-level="Blue">Henry Ford</option>
            <option value="90" data-level="Blue">Sharks</option>
            <option value="91" data-level="Blue">The Moon</option>
            <option value="92" data-level="Blue">Town Mouse and Country Mouse</option>
            <option value="93" data-level="Blue">The Nile</option>

        </select>
          </div>

          <div class="mb-3">
            <label>Time Taken (in minutes)</label>
            <input type="number" name="time_taken" class="form-control" required>
          </div>

          <div class="mb-3">
            <label>Feedback</label>
            <textarea name="feedback" class="form-control" rows="3"></textarea>
          </div>

          <button type="submit" class="btn btn-success">Submit Record</button>
        </form>
      </div>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const levelSelect = document.getElementById("levelSelectPhonics");
    const bookSelect = document.getElementById("bookSelect");

    // Store all book options initially
    const allOptions = Array.from(bookSelect.querySelectorAll('option[data-level]'));

    levelSelect.addEventListener("change", function () {
        const selectedLevel = this.value.toLowerCase();

        // Clear previous options
        bookSelect.innerHTML = '<option value="">-- Select Book --</option>';

        // Filter options by selected level
        const filtered = allOptions.filter(opt => opt.dataset.level.toLowerCase() === selectedLevel);

        // Add filtered options
        filtered.forEach(opt => {
            const newOpt = document.createElement("option");
            newOpt.value = opt.value;
            newOpt.textContent = opt.textContent;
            bookSelect.appendChild(newOpt);
        });

        // Enable dropdown only if filtered books exist
        bookSelect.disabled = filtered.length === 0;
    });
});
</script>



</body>
</html>





